<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Discopolia – Państwo Zenka</title>
<style>
body { margin:0; font-family: 'Arial', sans-serif; background:#111; color:#fff; text-align:center;}
header { background:linear-gradient(45deg,#ff0066,#ffcc00,#00ffcc); padding:2rem; animation:gradientShift 5s ease infinite; background-size:300% 300%; display:flex; align-items:center; justify-content:center; gap:20px; }
header h1 { margin:0; font-size:2.5rem; text-shadow:2px 2px 5px #000; }
header img { width:80px; height:80px; border-radius:50%; box-shadow:0 0 10px #ffcc00; }
@keyframes gradientShift {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
main { max-width:900px; margin:2rem auto; padding:0 1rem; }
section { background: rgba(255,255,255,0.05); padding:2rem; margin-bottom:2rem; border-radius:15px; box-shadow:0 0 15px #ff0066; }
h2 { color:#ffcc00; text-shadow:1px 1px 5px #000; }
.mapa { max-width:100%; border-radius:15px; box-shadow:0 0 20px #ffcc00; }
#gameArea { position:relative; width:100%; max-width:500px; height:400px; margin:1rem auto; border:2px solid #ffcc00; border-radius:15px; background:radial-gradient(circle,#222 40%,#111 100%); overflow:hidden; }
#zenek { position:absolute; width:80px; height:80px; cursor:pointer; display:none; }
#score { font-size:1.3rem; color:#00ffcc; }
.btn { background:#ff0066; border:none; color:#fff; padding:10px 20px; border-radius:10px; cursor:pointer; box-shadow:0 0 10px #ff0066; transition:0.3s; }
.btn:hover { background:#ffcc00; color:#111; }
#ranking table { margin:0 auto; border-collapse:collapse; color:#fff; }
#ranking th, #ranking td { padding:8px 12px; border-bottom:1px solid rgba(255,255,255,0.2); }
input, select { padding:6px; border-radius:6px; border:none; margin:0 5px; }
button.add { padding:6px 12px; background:#00ffcc; color:black; border-radius:6px; cursor:pointer; }
button.add:hover { background:#33ffee; }
.laws { margin-top:1rem; }
.law { background:rgba(255,255,255,0.05); margin:0.5rem 0; padding:0.5rem; border-radius:8px; text-align:left;}
#mandatBoxFixed { position:fixed; top:10px; left:10px; background:#ff0066; color:#fff; padding:10px 15px; border-radius:10px; font-weight:bold; z-index:999; box-shadow:0 0 10px #ffcc00; cursor:pointer; transition:0.2s; }
#mandatBoxFixed:hover { transform:scale(1.1); }
</style>
</head>
<body>
<header>
<img src="herb.png" alt="Herb Discopolii">
<h1>Witamy w Discopolii!</h1>
</header>

<div id="mandatBoxFixed">Mandaty Zenkowe: <span id="mandatCount">0</span></div>

<main>
<section>
<h2>Mapa Discopolii</h2>
<img src="mapa.png" alt="Mapa Discopolii" class="mapa">
</section>

<section>
<h2>Minigierka: Złap Zenka!</h2>
<div id="gameArea">
<img id="zenek" src="zenek.png" alt="Zenek">
</div>
<p id="score">Wynik: 0</p>
<button class="btn" id="startGame">Start!</button>
</section>

<section id="ranking">
<h2>Ranking Obywateli</h2>
<form id="addCitizen">
<input type="text" id="citizenName" placeholder="Twoje imię" required>
<select id="citizenTitle">
<option>Zenkołek</option>
<option>Disco-Książę</option>
<option>Super Zenek</option>
<option>Król Parkietu</option>
</select>
<button type="submit" class="add">Dołącz!</button>
</form>
<table>
<thead><tr><th>Imię</th><th>Tytuł</th><th>Mandaty</th></tr></thead>
<tbody id="citizenTable"></tbody>
</table>
</section>

<section id="lawsSection">
<h2>Ustawy Discopolii</h2>
<form id="addLaw">
<input type="text" id="lawName" placeholder="Nazwa ustawy" required>
<input type="text" id="lawDesc" placeholder="Opis ustawy" required>
<input type="number" id="lawReq" placeholder="Mandaty wymagane" min="1" required>
<button type="submit" class="add">Zaproponuj ustawę</button>
</form>
<div class="laws" id="lawsList"></div>
<h3>Zatwierdzone ustawy</h3>
<div class="laws" id="approvedLaws"></div>
</section>
</main>

<script>
let globalMandaty=0, boxMandaty=0, score=0, gameActive=false, moveInterval;
let citizens=[], laws=[], approvedLaws=[];
const globalCounter=document.getElementById('mandatCount');
const mandatBox=document.getElementById('mandatBoxFixed');
const zenek=document.getElementById('zenek');
const gameArea=document.getElementById('gameArea');
const scoreDisplay=document.getElementById('score');
const startButton=document.getElementById('startGame');
const citizenTable=document.getElementById('citizenTable');
const lawsList=document.getElementById('lawsList');
const approvedList=document.getElementById('approvedLaws');

/* --- LocalStorage --- */
function loadData(){
  globalMandaty=parseInt(localStorage.getItem("globalMandaty"))||0;
  boxMandaty=parseInt(localStorage.getItem("boxMandaty"))||0;
  citizens=JSON.parse(localStorage.getItem("citizens"))||[];
  laws=JSON.parse(localStorage.getItem("laws"))||[];
  approvedLaws=JSON.parse(localStorage.getItem("approvedLaws"))||[];
  updateCounters();
  renderCitizens();
  renderLaws();
  renderApprovedLaws();
}
function saveData(){
  localStorage.setItem("globalMandaty",globalMandaty);
  localStorage.setItem("boxMandaty",boxMandaty);
  localStorage.setItem("citizens",JSON.stringify(citizens));
  localStorage.setItem("laws",JSON.stringify(laws));
  localStorage.setItem("approvedLaws",JSON.stringify(approvedLaws));
}
function updateCounters(){ globalCounter.textContent=boxMandaty; }

/* --- Mandaty --- */
mandatBox.addEventListener('click',()=>{
  boxMandaty++; globalMandaty++; updateCounters(); addPointsToCitizen(1); saveData();
});

/* --- Minigra --- */
function moveZenek(){
  const x=Math.random()*(gameArea.clientWidth-zenek.clientWidth);
  const y=Math.random()*(gameArea.clientHeight-zenek.clientHeight);
  zenek.style.left=x+'px'; zenek.style.top=y+'px';
}
zenek.addEventListener('click',()=>{
  if(!gameActive) return;
  score++; scoreDisplay.textContent="Wynik: "+score;
  globalMandaty++; boxMandaty++; updateCounters(); addPointsToCitizen(1); saveData();
  moveZenek();
});
startButton.addEventListener('click',()=>{
  if(gameActive) return;
  score=0; scoreDisplay.textContent="Wynik: 0";
  gameActive=true; zenek.style.display="block";
  moveZenek(); moveInterval=setInterval(moveZenek,1000);
  setTimeout(()=>{ clearInterval(moveInterval); gameActive=false; zenek.style.display="none"; alert("Koniec
